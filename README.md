# ths_http_trader
同花顺本地下单接口

本项目旨在为自动交易，量化提供下单接口。
本项目针对的同花顺版本为 hexin.exe 8.0 及 9.0 以上的版本， 8.0版本支持持仓查询, 9.0及以上仅支持 资金查询，买入，卖出。

本项目调用底层的windows api 完成同花顺下单。
本地后台启动flask web微服务，监听本地8888端口。

以下url支持GET,POST请求：

http://127.0.0.1:8888/balance

返回值 {'status': 1, 'message': {'资金余额': '108328.65', '可用金额': '78919.91', '可取金额': '0.00', '股票市值': '90113.00', '总资产': '171154.59'}}

http://127.0.0.1:8888/position

返回值 {'status': 1, 'message': {'002555': {'证券名称': '三七互娱', '冻结数量': 0, '可用余额': 200, '股票余额': 200, '成本价': 16.147}, '301236': {'证券名称': '软通动力', '冻结数量': 100, '可用余额': 0, '股票余额': 100, '成本价': 44.784}, '600078': {'证券名称': 'ST澄星', '冻结数量': 3800, '可用余额': 3700, '股票余额': 7500, '成本价': 6.381}, '600988': {'证券名称': '赤峰黄金', '冻结数量': 0, '可用余额': 400, '股票余额': 400, '成本价': 17.243}, '601212': {'证券名称': '白银有色', '冻结数量': 0, '可用余额': 2400, '股票余额': 2400, '成本价': 2.991}, '601390': {'证券名称': '中国中铁', '冻结数量': 0, '可用余额': 0, '股票余额': 0, '成本价': 0.0}, '688089': {'证券名称': '嘉必优', '冻结数量': 0, '可用余额': 100, '股票余额': 100, '成本价': 3.263}, '688182': {'证券名称': '灿勤科技', '冻结数量': 0, '可用余额': 400, '股票余额': 400, '成本价': 17.866}, '688685': {'证券名称': '迈信林', '冻结数量': 0, '可用余额': 200, '股票余额': 200, '成本价': 48.536}}}

GET http://127.0.0.1:8888/buy?stock_code=600160&price=14.59&amount=100

POST http://127.0.0.1:8888/buy   data = {"stock_code": "600160", "price": 14.59, "amount": 100}

返回值 {"message": "提交失败：[600160:14.590]超过涨跌限制。25.93-21.21。","status": -1}  

GET http://127.0.0.1:8888/buy?stock_code=600160&price=21.21&amount=100

POST http://127.0.0.1:8888/buy   data = {"stock_code": "600160", "price": 21.21, "amount": 100}

返回值 {"message": "您的买入委托已成功提交，合同编号：4025982646。","status": 1}

GET http://127.0.0.1:8888/sell?stock_code=600160&price=21.21&amount=100

POST http://127.0.0.1:8888/sell   data = {"stock_code": "600160", "price": 21.21, "amount": 100}

返回值 {"message": "委托失败，可交易股数为0","status": -1}

委托下单参数说明:

stock_code: eg 600160 sh600160 SH600160 必传

price: eg 21.21 "21.21" None 可不传 不传时 要求同花顺系统设置默认价格 本软件不往同花顺软件里填写价格

amount: eg 100 "100" "max" 值为"max"时，表示按最大可交易额度下单，必传
